{
  # for more info about the config, check out the documentation
  # https://join-lemmy.org/docs/en/administration/configuration.html
  # This is a minimal lemmy config for the dev / main branch. Do not use for a
  # release / stable version.
  # settings related to the postgresql database
  database: {
    # Username to connect to postgres
    user: "lemmy"
    # Password to connect to postgres
    password: "{{ postgres_pw }}"
    # Host where postgres is running
    host: "db.lan"
    # Port where postgres can be accessed
    port: 5432
    # Name of the postgres database for lemmy
    database: "lemmy"
    # Maximum number of active sql connections
    pool_size: 5
  }
  # Settings related to activitypub federation
  # Pictrs image server configuration.
  pictrs: {
    # Address where pictrs is available (for image hosting)
    url: "http://lemmy_pictrs:8080/"
    # Set a custom pictrs API key. ( Required for deleting images )
    api_key: "{{ lemmy_pictrs }}"
    # If enabled, all images from remote domains are rewritten to pass through
    # `/api/v3/image_proxy`, including embedded images in markdown. Images are stored temporarily
    # in pict-rs for caching. This improves privacy as users don't expose their IP to untrusted
    # servers, and decreases load on other servers. However it increases bandwidth use for the
    # local server.
    image_mode: "ProxyAllImages"
  }
  # Email sending configuration. All options except login/password are mandatory
  email: {
    # Hostname and port of the smtp server
    smtp_server: "{{ smtp_host }}:465"
    # Login name for smtp server
    smtp_login: "{{ smtp_user }}"
    # Password to login to the smtp server
    smtp_password: "{{ smtp_password }}"
    # Address to send emails from, eg "noreply@your-instance.com"
    smtp_from_address: "{{ smtp_user }}"
    # Whether or not smtp connections should use tls. Can be none, tls, or starttls
    tls_type: "tls"
  }
  prometheus: {
    bind: "0.0.0.0"
    port: 10002
  }
  federation: {
    # Limit to the number of concurrent outgoing federation requests per target instance.
    # Set this to a higher value than 1 (e.g. 6) only if you have a huge instance (>10 activities
    # per second) and if a receiving instance is not keeping up.
    concurrent_sends_per_instance: 1
  }
  # the domain name of your instance (mandatory)
  hostname: "news.wigger.one"
  # Address where lemmy should listen for incoming requests
  bind: "0.0.0.0"
  # Port where lemmy should listen for incoming requests
  port: 8536
  # Whether the site is available over TLS. Needs to be true for federation to work.
  tls_enabled: true
  # The number of activitypub federation workers that can be in-flight concurrently
  worker_count: 0
  # The number of activitypub federation retry workers that can be in-flight concurrently
  retry_count: 0
}